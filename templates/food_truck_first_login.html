{% include 'links.html' %}
<body class="customer-login-bg">

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div id="toast-container">
          {% for category, message in messages %}
            <div class="toast toast-{{category}}">{{message}}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <div class="login-container">
        <form action="food_truck_first_login_action" method="post">
            <div class="login-title" style="color: white;">Change Your Password</div>
            <p style="color: red; font-weight: bold; text-align: center; margin-bottom: 20px;">For security reasons, please change your password on first login.</p>
            
            <div class="form-group">   
                <label for="current_password" class="form-label">Current Password</label>
                <div class="input-field">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2C9.243 2 7 4.243 7 7v4H5a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1h-2V7c0-2.757-2.243-5-5-5zm-3 9V7a3 3 0 0 1 6 0v4h-6zm-2 2h10v7H7v-7z"></path>
                    </svg>
                    <input type="password" name="current_password" id="current_password" class="input-field" minlength="3" maxlength="20" placeholder="Enter Current Password" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="new_password" class="form-label">New Password</label>
                <div class="input-field">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2C9.243 2 7 4.243 7 7v4H5a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1h-2V7c0-2.757-2.243-5-5-5zm-3 9V7a3 3 0 0 1 6 0v4h-6zm-2 2h10v7H7v-7z"></path>
                    </svg>
                    <input type="password" name="new_password" id="new_password" class="input-field" minlength="3" maxlength="20" placeholder="Enter New Password" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="confirm_password" class="form-label">Confirm New Password</label>
                <div class="input-field">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2C9.243 2 7 4.243 7 7v4H5a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1h-2V7c0-2.757-2.243-5-5-5zm-3 9V7a3 3 0 0 1 6 0v4h-6zm-2 2h10v7H7v-7z"></path>
                    </svg>
                    <input type="password" name="confirm_password" id="confirm_password" class="input-field" minlength="3" maxlength="20" placeholder="Confirm New Password" required>
                </div>
            </div>
            
            <div class="form-group">
                <button type="submit" class="submit-btn">Change Password</button>
            </div>
        </form>
    </div>

    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            const password = document.getElementById('new_password').value;
            const confirmPassword = document.getElementById('confirm_password').value;

            if (password !== confirmPassword) {
                e.preventDefault();
                alert('New passwords do not match!');
            }
        });
        
        setTimeout(function() {
            const toastContainer = document.getElementById('toast-container');
            if (toastContainer) {
                toastContainer.style.display = 'none';
            }
        }, 3000);
    </script>
</body>